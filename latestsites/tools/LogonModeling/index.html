<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>DELPH-IN Tools</title>
<meta name="description" content="An amazing website.">


  <meta name="author" content="Your Name">
  


<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="DELPH-IN Tools">
<meta property="og:title" content="DELPH-IN Tools">
<meta property="og:url" content="http://blog.inductorsoftware.com/docsproto/tools/LogonModeling/">


  <meta property="og:description" content="An amazing website.">











  

  


<link rel="canonical" href="http://blog.inductorsoftware.com/docsproto/tools/LogonModeling/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Your Name",
      "url": "http://blog.inductorsoftware.com/docsproto/tools/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/docsproto/tools/feed.xml" type="application/atom+xml" rel="alternate" title="DELPH-IN Tools Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/docsproto/tools/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--delphin_page wide">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/docsproto/tools/"><img src="/docsproto/tools/assets/images/Delph-In.png" alt="DELPH-IN Tools"></a>
        
        <a class="site-title" href="/docsproto/tools/">
          DELPH-IN Tools
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="https://blog.inductorsoftware.com/docsproto/home/Home">Home</a>
            </li><li class="masthead__menu-item">
              <a href="https://blog.inductorsoftware.com/docsproto/howto/DelphinWelcome">How-to</a>
            </li><li class="masthead__menu-item">
              <a href="https://blog.inductorsoftware.com/docsproto/erg/ErgTop">ERG</a>
            </li><li class="masthead__menu-item">
              <a href="https://blog.inductorsoftware.com/docsproto/tools/ToolsTop">Tools</a>
            </li><li class="masthead__menu-item">
              <a href="https://blog.inductorsoftware.com/docsproto/grammars/GrammarCatalogue">Grammars</a>
            </li><li class="masthead__menu-item">
              <a href="https://blog.inductorsoftware.com/docsproto/matrix/MatrixTop">Matrix</a>
            </li><li class="masthead__menu-item">
              <a href="https://blog.inductorsoftware.com/docsproto/garage/RedwoodsTop">Garage</a>
            </li><li class="masthead__menu-item">
              <a href="https://blog.inductorsoftware.com/docsproto/summits/SummitTop">Summits</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      <li>
        
          <span class="nav__sub-title">Tools</span>
        

        
        <ul>
          
            <li><a href="/docsproto/tools/ToolsTop">Overview</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">PyDelphin</span>
        

        
        <ul>
          
            <li><a href="/docsproto/tools/PyDelphinTop">Overview</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">ACE Parser</span>
        

        
        <ul>
          
            <li><a href="/docsproto/tools/AceTop">Overview</a></li>
          
            <li><a href="/docsproto/tools/AceInstall">Install</a></li>
          
            <li><a href="/docsproto/tools/AceFaq">Faq</a></li>
          
            <li><a href="/docsproto/tools/AceConfiguration">Configuration</a></li>
          
            <li><a href="/docsproto/tools/AceOptions">Options</a></li>
          
            <li><a href="/docsproto/tools/AceUse">Examples</a></li>
          
            <li><a href="/docsproto/tools/AceLui">LUI Mode</a></li>
          
            <li><a href="/docsproto/tools/AceCsaw">Csaw</a></li>
          
            <li><a href="/docsproto/tools/AceWishlist">Wish list</a></li>
          
            <li><a href="/docsproto/tools/AceTransfer">Transfer</a></li>
          
            <li><a href="/docsproto/tools/AceExperimental">Experimental</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">LKB</span>
        

        
        <ul>
          
            <li><a href="/docsproto/tools/LkbTop">Overview</a></li>
          
            <li><a href="/docsproto/tools/LkbInstallation">Installation</a></li>
          
            <li><a href="/docsproto/tools/LkbFos">Fully Open Source Version</a></li>
          
            <li><a href="/docsproto/tools/LkbMacintosh">Macintosh Version</a></li>
          
            <li><a href="/docsproto/tools/LkbFaq">FAQ</a></li>
          
            <li><a href="/docsproto/tools/LkbUserGroup">User Group</a></li>
          
            <li><a href="/docsproto/tools/LkbCourses">Courses</a></li>
          
            <li><a href="/docsproto/tools/LkbConventions">Conventions</a></li>
          
            <li><a href="/docsproto/tools/LkbGeneration">Generation</a></li>
          
            <li><a href="/docsproto/tools/LkbCompilation">Compilation</a></li>
          
            <li><a href="/docsproto/tools/LkbEmacs">Emacs</a></li>
          
            <li><a href="/docsproto/tools/LkbTrollet">Trollet</a></li>
          
            <li><a href="/docsproto/tools/LkbSppp">Simple PreProcessor Protocol</a></li>
          
            <li><a href="/docsproto/tools/RmrsVpm">Variable Property Mapping (VPM)</a></li>
          
            <li><a href="/docsproto/tools/LkbWishlist">Wish list</a></li>
          
            <li><a href="/docsproto/tools/LkbBugs">Bugs</a></li>
          
            <li><a href="/docsproto/tools/LkbCopyright">Copyright</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">LKB LUI</span>
        

        
        <ul>
          
            <li><a href="/docsproto/tools/LkbLui">Overview</a></li>
          
            <li><a href="/docsproto/tools/LuiRc">User Configuration</a></li>
          
            <li><a href="/docsproto/tools/LuiUi">Ui</a></li>
          
            <li><a href="/docsproto/tools/LuiTree">Tree</a></li>
          
            <li><a href="/docsproto/tools/LuiAvm">Avm</a></li>
          
            <li><a href="/docsproto/tools/LuiUnification">Unification</a></li>
          
            <li><a href="/docsproto/tools/LuiMrs">Mrs</a></li>
          
            <li><a href="/docsproto/tools/LuiChart">Chart</a></li>
          
            <li><a href="/docsproto/tools/LuiWishlist">Wish list</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">[incr tsdb()]</span>
        

        
        <ul>
          
            <li><a href="/docsproto/tools/ItsdbTop">Overview</a></li>
          
            <li><a href="/docsproto/tools/ItsdbDerivations">Derivations</a></li>
          
            <li><a href="/docsproto/tools/ItsdbReference">Reference</a></li>
          
            <li><a href="/docsproto/tools/GeFaqTsdbRc">FAQ</a></li>
          
            <li><a href="/docsproto/tools/TsdbTop">Deep Dive</a></li>
          
            <li><a href="/docsproto/tools/ItsdbWishlist">Wish List</a></li>
          
            <li><a href="/docsproto/tools/ItsdbProfileManipulation">Profile Manipulation</a></li>
          
            <li><a href="/docsproto/tools/ItsdbProfile">Profile</a></li>
          
            <li><a href="/docsproto/tools/ItsdbProfiling">Profiling</a></li>
          
            <li><a href="/docsproto/tools/ItsdbDistributedProcessing">Distributed Processing</a></li>
          
            <li><a href="/docsproto/tools/ItsdbBatch">Batch</a></li>
          
            <li><a href="/docsproto/tools/ItsdbCustomization">Customization</a></li>
          
            <li><a href="/docsproto/tools/ItsdbTroubleshooting">Troubleshooting</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Logon</span>
        

        
        <ul>
          
            <li><a href="/docsproto/tools/LogonTop">Overview</a></li>
          
            <li><a href="/docsproto/tools/LogonRedhat">Red Hat</a></li>
          
            <li><a href="/docsproto/tools/LogonUbuntu">Ubuntu</a></li>
          
            <li><a href="/docsproto/tools/LogonArch">Arch Linux</a></li>
          
            <li><a href="/docsproto/tools/LogonHandon">Hands-On Release</a></li>
          
            <li><a href="/docsproto/tools/LogonSvn">SVN</a></li>
          
            <li><a href="/docsproto/tools/LogonProcessing_BatchGeneration">Batch Generation</a></li>
          
            <li><a href="/docsproto/tools/LogonProcessing_BatchTranslation">Batch Translation</a></li>
          
            <li><a href="/docsproto/tools/LogonPet">Pet</a></li>
          
            <li><a href="/docsproto/tools/LogonAnswer">ACE</a></li>
          
            <li><a href="/docsproto/tools/LogonExtras">Extras</a></li>
          
            <li><a href="/docsproto/tools/LogonInstallation">Installation</a></li>
          
            <li><a href="/docsproto/tools/LogonReports">Reports</a></li>
          
            <li><a href="/docsproto/tools/LogonProcessing">Processing</a></li>
          
            <li><a href="/docsproto/tools/LogonProcessing_BatchParsing">Batch Parsing</a></li>
          
            <li><a href="/docsproto/tools/LogonModeling">Modeling</a></li>
          
            <li><a href="/docsproto/tools/LogonOnline">Online</a></li>
          
            <li><a href="/docsproto/tools/LogonTransfer">Transfer</a></li>
          
            <li><a href="/docsproto/tools/LogonIdiosyncrasies">Idiosyncrasies</a></li>
          
            <li><a href="/docsproto/tools/MtJaen">Japanese/English MT</a></li>
          
            <li><a href="/docsproto/tools/MtSetup">Japanese/English MT Setup</a></li>
          
            <li><a href="/docsproto/tools/LogonWishlist">Wishlist</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Grammar Tools</span>
        

        
        <ul>
          
            <li><a href="/docsproto/tools/EgadTop">Erroneous Generation Analysis and Detection</a></li>
          
            <li><a href="/docsproto/tools/GDeltaTop">gDelta</a></li>
          
            <li><a href="/docsproto/tools/SpringCleaningTop">Grammar Spring Cleaning</a></li>
          
            <li><a href="/docsproto/tools/LkbLtdb">Linguistic Type Database</a></li>
          
            <li><a href="/docsproto/tools/TypediffTop">Typediff</a></li>
          
            <li><a href="/docsproto/tools/VersionControlForGrammarDevelopment">Grammar Version Control</a></li>
          
            <li><a href="/docsproto/tools/ChartMapping">Chart Mapping</a></li>
          
            <li><a href="/docsproto/tools/ClimbTop">CLIMB</a></li>
          
            <li><a href="/docsproto/tools/ClimbShortClimb">SHORT-CLIMB</a></li>
          
            <li><a href="/docsproto/tools/Climb_GClimb">CLIMB for Germanic languages</a></li>
          
            <li><a href="/docsproto/tools/Climb_GClimb_German">gCLIMB Phenomena</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Treebanking</span>
        

        
        <ul>
          
            <li><a href="/docsproto/tools/TreebankingTop">Overview</a></li>
          
            <li><a href="/docsproto/tools/FftbTop">Full Forest Treebanker (FFTB)</a></li>
          
            <li><a href="/docsproto/tools/FftbWishlist">Full Forest Treebanker Wishlist</a></li>
          
            <li><a href="/docsproto/tools/ItsdbTreebanking">[incr tsdb()] Treebanking</a></li>
          
            <li><a href="/docsproto/tools/ItsdbTreebanking_ItsdbAnnotation">[incr tsdb()] Treebanking Annotation</a></li>
          
            <li><a href="/docsproto/tools/ItsdbTreebanking_ItsdbUpdating">[incr tsdb()] Treebanking Updating</a></li>
          
            <li><a href="/docsproto/tools/ItsdbTreebanking_ItsdbExporting">[incr tsdb()] Treebanking Exporting</a></li>
          
            <li><a href="/docsproto/tools/ItsdbTreebanking_ItsdbModeling">[incr tsdb()] Treebanking Modeling</a></li>
          
            <li><a href="/docsproto/tools/ItsdbTreebanking_ItsdbUpdating">[incr tsdb()] Treebanking Updating</a></li>
          
            <li><a href="/docsproto/tools/ItsdbCustomization">[incr tsdb()] Treebanking Customization</a></li>
          
            <li><a href="/docsproto/tools/ItsdbTreebanking_ItsdbModeling">[incr tsdb()] Treebanking Modeling</a></li>
          
            <li><a href="/docsproto/tools/IndraTreebanking">Indra</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Formats</span>
        

        
        <ul>
          
            <li><a href="/docsproto/tools/DelphinRFCs">Delphin RFCs</a></li>
          
            <li><a href="/docsproto/tools/PredicateRfc">Predicate RFC</a></li>
          
            <li><a href="/docsproto/tools/MrsRFC">MRS Format RFC</a></li>
          
            <li><a href="/docsproto/tools/MrsIsomorphism">MRS Isomorphism</a></li>
          
            <li><a href="/docsproto/tools/EdsTop">EDS Format</a></li>
          
            <li><a href="/docsproto/tools/EdsConversion">EDS Conversion</a></li>
          
            <li><a href="/docsproto/tools/EdsGeneration">EDS Generation</a></li>
          
            <li><a href="/docsproto/tools/SemiRfc">SEM-I RFC</a></li>
          
            <li><a href="/docsproto/tools/TdlRFC">TDL RFC</a></li>
          
            <li><a href="/docsproto/tools/TsqlRfc">TSQL RFC</a></li>
          
            <li><a href="/docsproto/tools/GrammarVersionRfc">Grammar Version RFC</a></li>
          
            <li><a href="/docsproto/tools/GrammarConfigurationRfc">Grammar Configuration RFC</a></li>
          
            <li><a href="/docsproto/tools/TsdbSchemaRfc">TSDB Schema RFC</a></li>
          
            <li><a href="/docsproto/tools/MatrixChoicesRfc">Matrix Choices RFC</a></li>
          
            <li><a href="/docsproto/tools/RmrsTop">(R)MRS Overview</a></li>
          
            <li><a href="/docsproto/tools/RmrsWellformedness">(R)MRS Wellformedness</a></li>
          
            <li><a href="/docsproto/tools/RmrsPos">(R)MRS Predicate Naming</a></li>
          
            <li><a href="/docsproto/tools/RmrsSpan">(R)MRS Span</a></li>
          
            <li><a href="/docsproto/tools/RmrsDesign">(R)MRS Design</a></li>
          
            <li><a href="/docsproto/tools/RmrsParaphrasing">(R)MRS Paraphrasing</a></li>
          
            <li><a href="/docsproto/tools/RmrsModel">(R)MRS Model</a></li>
          
            <li><a href="/docsproto/tools/RmrsDistributional">(R)MRS Distributional</a></li>
          
            <li><a href="/docsproto/tools/RmrsSemi">(R)MRS Semi</a></li>
          
            <li><a href="/docsproto/tools/RmrsDmrs">(R)MRS Dmrs</a></li>
          
            <li><a href="/docsproto/tools/RmrsFaq">(R)MRS Faq</a></li>
          
            <li><a href="/docsproto/tools/RmrsDiscussions">(R)MRS Discussions</a></li>
          
            <li><a href="/docsproto/tools/TransferRules">Transfer Rules</a></li>
          
            <li><a href="/docsproto/tools/FormatSpecifications">Format Specifications</a></li>
          
            <li><a href="/docsproto/tools/ErgGml">Grammar Markup Language</a></li>
          
            <li><a href="/docsproto/tools/SmafTop">SMAF</a></li>
          
            <li><a href="/docsproto/tools/IconsSpecs">Icons Specs</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Misc</span>
        

        
        <ul>
          
            <li><a href="/docsproto/tools/DelphinTools">Delphin Tools</a></li>
          
            <li><a href="/docsproto/tools/VistaExtractionTop">Vista Extraction</a></li>
          
            <li><a href="/docsproto/tools/ReppTop">Regular Expression Pre-Processor</a></li>
          
            <li><a href="/docsproto/tools/TestingWithAnt">Testing With Ant</a></li>
          
            <li><a href="/docsproto/tools/HeartofgoldTop">Heart of Gold</a></li>
          
            <li><a href="/docsproto/tools/RmrsDmrsComparison">Rmrs/Dmrs Comparison</a></li>
          
            <li><a href="/docsproto/tools/SafFspp">Finite-State PreProcessor</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>

    
  
  </div>



  <article class="page h-entry" itemscope itemtype="https://schema.org/CreativeWork">
    
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          


        </header>
      

      <section class="page__content e-content" itemprop="text">
        
        <h1 id="overview">Overview</h1>

<p>This page contains various code examples showing how to estimate and
apply statistical models within LOGON. For more detailed information on
feature types, estimation parameters, or the experimentation environment
in general, see <a href="http://www.velldal.net/erik/pubs/Velldal08.pdf">Velldal
(2008)</a>.</p>

<h1 id="discriminative-modeling">Discriminative Modeling</h1>

<p>In the following, we assume that <strong>generation treebanks</strong> for the LOGON
JHPSTG and Rondane corpora are available. For the HandOn release (of
November 2008) of the LOGON system, these treebanks can be installed
into the lingo/redwoods/ directory from SVN; see the
<a href="../LogonExtras">LogonExtras</a> page for instructions on how to install
add-on LOGON components. However, in principle, these instructions
should be applicable to other Redwoods-style treebanks. Information on
how to create a generation treebank is given on the
<a href="../LogonProcessing_BatchGeneration">LogonProcessing/BatchGeneration</a> page.</p>

<p>The examples below assume that the <a href="http://www.delph-in.net/itsdb">[incr
tsdb()]</a> database root is pointing to
the collection of LOGON treebanks, i.e. the directory
lingo/redwoods/tsdb/home/, which is one of the SVN add-on components
(see the <a href="../LogonExtras">LogonExtras</a> page). We further assume that the
complete LOGON system and correct grammar (the ERG from
lingo/redwoods/erg/, in our case) are already loaded.</p>

<p>Set the feature parameters. The system defaults correspond to:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  (let ((*feature-grandparenting* 4)
        (*feature-active-edges-p* t)
        (*feature-ngram-size* 4)
        (*feature-ngram-back-off-p* t)
        (*feature-ngram-tag* :type)
        (*feature-use-preterminal-types-p* t)
        (*feature-lexicalization-p* t)
        (*feature-constituent-weight* 2)
        (*feature-lm-p* 10)
        (*feature-frequency-threshold* nil))

    ...)
</code></pre></div></div>

<p>Create a feature cache for the (virtual) profile jhpstg.g (we typically
use the .g suffix for generation treebanks):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  (setq gold "jhpstg.g")
  (operate-on-profiles (list gold) :task :fc)
</code></pre></div></div>

<p>Intended as a one-time operation, the feature caching extracts all the
features from the treebank and stores them in a (Berkeley DB) database
within the respective profile directory (named fc.bdb). When running
experiments later, this means that we simply look up the features in the
DB, saving us the cost of extraction. A symbol table named fc.mlm (also
created within the jhpstg.g profile for the example above) records the
mapping from symbolic feature representations to numerical indexes (as
used for model estimation and DB storage). The symbol table is only
referenced when exporting or applying a model to new data (see the
example below), but it can also be useful to inspect manually, e.g. to
confirm that features have the correct form, plausible counts, plausible
value ranges, etc.</p>

<p>Example of how to run a single experiment using 5-fold cross-validation:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  (setq test "jhpstg.t")
  (tsdb :create test :skeleton "jhpstg")
  (rank-profile gold test :nfold 5)
</code></pre></div></div>

<p>The number of cross-validation folds is specified with the :nfold
parameter. An optional :niterations parameter may be used to specify how
many of these folds are actually run to save execution time.</p>

<p>Running a batch of 10-fold MaxEnt experiments on jhpstg.g, iterating
over different configurations of features and estimation parameters (the
top-level function batch-experiment() performs an exhaustive ‘grid
search’ over all combinations of specified parameter values):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  (batch-experiment
   :type :mem
   :variance '(nil 1000 100 10 1 1.0e-1 1.0e-2)
   :absolute-tolerance 1.0e-10
   :source "jhpstg.g"
   :skeleton "jhpstg"
   :random-sample-size nil
   :ngram-size '(0 1 2 3)
   :active-edges-p nil
   :grandparenting '(0 1 2 3)
   :lm-p 10
   :counts-relevant 1
   :nfold 10
   :compact nil)
</code></pre></div></div>

<p>The following gives a brief explanation of the various keyword
arguments. The :variance parameter governs the Gaussian prior on feature
weights.; :absolute-tolerance governs the convergence threshold.
Specifying a non-nil (integer) value <em>n</em> for :random-sample-size means
that only a random selection of (maximally) <em>n</em> non-preferred candidates
for each item is included in the training data. The parameter
:counts-relevant governs a frequency-based cutoff on feature values. The
keywords :ngram-size, :active-edges-p, and :grandparenting allow
iteration over feature parameters. Note that specifying :lm-p 10 means
that the value of the language model feature is divided by 10; this is
basically a hack to avoid numerical problems during estimation. To leave
out the LM feature, call with :lm-p nil instead. Specifying :type :mem
means that we are training a conditional maximum entropy model (aka
log-linear model). The value of :type could also be :svm if you have
SVM<sup>light</sup> installed (it is currently not part of the LOGON
dstribution). The boolean-valued :compact governs the naming convention
when creating target profiles, i.e. if the profile names for the 10-fold
cross validation experiments look excessively long (or even cause issues
with OS-imposed limits on the total length of pathnames), try <em>t</em> as the
:compact value.</p>

<p>After running the grid search, you need to evaluate the different
combinations of parameters to determine the optimal combination for
parsing accuracy. Running:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  (summarize-experiments :stream t)
</code></pre></div></div>

<p>will summarize various metrics for each grid search experiment that has
been run. This reports accuracy, variance, number of iterations as well
as the filename of the experiment (which allows you to determine the
parameters), with one item per line. Redirecting this to a file, you can
sort -n and manually determine the optimal parameter combination.</p>

<p>Having determined the appropriate parameters, you can use them to
estimate and export a maxent model, such as the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  (let ((*feature-grandparenting* 3)
        (*feature-ngram-size* 3)
        (*feature-lm-p* nil)
        (*maxent-variance* 8e-4)
        (*feature-frequency-threshold* (make-counts :relevant 1)))
    (train "jhpstg.g" "jhpstg.g.mem" :fcp nil :type :mem))
</code></pre></div></div>

<p>This writes the estimated model to jhpstg.g.mem (for more information on
the format, see Chapter 6 of <a href="http://www.velldal.net/erik/pubs/Velldal08.pdf">Velldal
(2008)</a>). The keyword
argument :fcp nil means that we do not want to create a feature cache,
but rather use the one we already have.</p>

<p>Applying the model trained above to the generation treebank rondane.g:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  (tsdb :create "rondane.t" :skeleton "rondane")

  (operate-on-profiles
    (list "rondane.g") :model (read-model "jhpstg.m.mem")
    :target "rondane.t" :task :rank)
</code></pre></div></div>

<h1 id="automating-experiments">Automating Experiments</h1>

<p>Once the LOGON ERG add-on treebanks are installed (see the
<a href="../LogonExtras">LogonExtras</a> page), there are several Lisp parameter files
and a shell script (called lingo/redwoods/load) to run the steps above
from the command line. For example, the creation of a feature cache (on
the default generation treebank jhpstg.g) can be automated as follows:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  cd $LOGONROOT/lingo/redwoods
  ./load --binary fc.g.lisp
</code></pre></div></div>

<p>The parameter file grid.g.lisp provides the default setup for an
exhaustive grid search for the best-performing combinations of features
and meta-parameters. Once optimal parameters values are identified, the
file train.g.lisp automates the training and serialization of a MaxEnt
model file, in this case called (by default) jhpstg.g.mem. All of the
Lisp files are intended for use with the load script, analogous to the
call example given above. Even on adequate hardware (we recommend a
64-bit Linux environment with at least eight gigabytes of available
RAM), each of these steps can take substantial time, i.e. between
several hours and many days (for the grid search, depending on how many
parameter variations are explored).</p>

<p>Note that there are ‘families’ of Lisp parameter files in
lingo/redwoods/, one for parse ranking (fc.lisp, grid.lisp, train.lisp),
one for realization ranking (used in our examples above), and another
one for end-to-end MT re-ranking (fc.r.lisp, grid.r.lisp, and
train.r.lisp). For each task, there is an additional file defining the
default environment, called parsing.lisp, generation.lisp, and
ranking.lisp). Furthermore, the <a href="http://www.delph-in.net/itsdb">[incr
tsdb()]</a> configuration for automated
MaxEnt experimentation is determined by the file dot.tsdbrc in
lingo/redwoods/.</p>

<p>These files are distributed primarily to serve as <em>examples</em> for similar
experimentation. To vary the nature of each experiment (e.g. using
different treebanks, another grammar or MT configuration, or additional
feature types), it may be necessary to adapt dot.tsdbrc and the Lisp
configuration files appropriately (or even the load script). Where
possible, we recommend copying the existing files to create a new
‘family’ of parameter settings and tasks.</p>

<h1 id="virtual-profiles">Virtual Profiles</h1>

<p>To keep the databases of a manageable size, individual profiles are
typically limited to between 500 to 2000 items each. If you need to work
with a larger data set set you may combine several profiles into a
single read-only virtual profile. Virtual profiles are (currently) only
used in parse selection experiments and are only supported in parts of
the [incr tsdb()] code base.</p>

<p>For example, the LOGON tree contains a virtual profile for the complete
JHPSTG corpus in the lingo/redwoods/tsdb/home/jhpstg/ directory. A
virtual profile consists of a single text file called virtual that
contains the list of the profiles it includes (in this case, the
individual JHPSTG sections), one profile per line, where the profile
names are double-quoted.</p>

<p>The parameter grid search process writes its output (fold and scoring
results from n-fold cross validation) to new profiles, which in the
default experimentation setup of the LOGON tree are created below
lingo/redwoods/tsdb/home/. In order to create these outputs for a
virtual profile, [incr tsdb()] requires a skeleton that contains the
parts of the profile that will be shared among all the outputs. The
skeleton for the full JHPSTG corpus is in
lingo/lkb/src/tsdb/skeletons/english/logon/jhpstg/. This was created by
concatenating the item and item-set files from all the profiles jhpstg
contains and copying in the relations file, essentially the following
sequence of operations:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  cd $LOGONROOT/lingo/lkb/src/tsdb/skeletons/english/logon
  mkdir jhpstg
  cat jh{0,1,2,3,4,5}/item {ps,tg}/item &gt; jhpstg/item
  cat jh{0,1,2,3,4,5}/item {ps,tg}/item-set &gt; jhpstg/item-set
  cp ../Relations jhpstg/relations
</code></pre></div></div>

<p>This skeleton is made visible to [incr tsdb()] by adding the
appropriate line to the skeleton registry file
lingo/lkb/src/tsdb/skeletons/english/logon/Index.lisp.</p>

<p>A new virtual profile can be defined by creating the appropriate virtual
file; in case it is to be used for the parameter grid search step, one
also needs to create the corresponding [incr tsdb()] skeleton.</p>

<h1 id="generation-model-from-non-treebanked-underspecified-mrss">Generation model from non-treebanked underspecified MRSs</h1>

<p>This section shows a procedure for creating a generation model without a
treebank for the items used for the model, and where the MRSs that are
generated from are underspecified.</p>

<h2 id="creating-a-gold-profile">Creating a gold profile</h2>

<p>The following command parses the English Tanaka Corpus sentences in
rtc006 and stores the 5 top ranked MRSs.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd $LOGONROOT
./parse --binary --erg+tnt/mrs --best 5 rtc006
</code></pre></div></div>

<p>The profile is stored in
$LOGONROOT/lingo/lkb/src/tsdb/home/erg/1004/rtc006/10-10-10/pet/, given
that the version of the ERG is 1004, and that the date is October 10,</p>
<ol>
  <li>The next step is to make a gold profile from the parsed profile:</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>TSDBHOME=$LOGONROOT/lingo/lkb/src/tsdb/home
export PATH=$TSDBHOME:$PATH
mkdir $TSDBHOME/gold/erg/rtc006/
cp $TSDBHOME/erg/1004/rtc006/10-10-10/pet/* $TSDBHOME/gold/erg/rtc006/.
python underspecify.py $TSDBHOME/gold/erg/rtc006/result
</code></pre></div></div>

<p>The
<a href="/LogonModeling?action=AttachFile&amp;do=upload_form&amp;ticket=006099bd3f.4c8ac87827ce19dd7e2871833ee82a035f21590f&amp;target=underspecify.py%3B" title="Upload new attachment &quot;underspecify.py;&quot;">underspecify.py;</a>
script finds the top ranked MRSs in the result file and under-specifies
them with regard to person, number, gender, definiteness, and some
location relations. This is useful if the generation model is meant for
generation with the <a href="../MtJaen">MtJaen</a> translation system since the output
of the Jaen transfer grammar is often under-specified with regard to
these features.</p>

<h2 id="creating-a-generation-profile">Creating a generation profile</h2>

<p>A generation profile is created with the following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./generate --binary --update rtc006
</code></pre></div></div>

<p>The generation profile is written into
$LOGONROOT/lingo/lkb/src/tsdb/home/erg/1004/rtc006/10-10-10/lkb/. The
files preference and tree are given information about generated items
that match the original item by executing the
<a href="/LogonModeling?action=AttachFile&amp;do=upload_form&amp;ticket=006099bd3f.4c8ac87827ce19dd7e2871833ee82a035f21590f&amp;target=gentreebank.py%3B" title="Upload new attachment &quot;gentreebank.py;&quot;">gentreebank.py;</a>
script:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python gentreebank.py $TSDBHOME/erg/1004/rtc006/10-10-10/lkb/result
</code></pre></div></div>

<h2 id="training-the-generation-model">Training the generation model</h2>

<p>A generation model based on the rtc006 generation profile produced above
can be trained as follows:</p>

<p>1. Modify the fc.g.lisp file in the $LOGONHOME/lingo/redwoods directory
so that it operates on your generation profile.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(operate-on-profiles '("erg/1004/rtc006/10-10-10/lkb/"))
</code></pre></div></div>

<p>2. Modify the dot.tsdbrc file in the same directory so that the line</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  (tsdb :home (format nil "~a/lingo/redwoods/tsdb/home" root))
</code></pre></div></div>

<p>becomes</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  (tsdb :home (format nil "~a/lingo/lkb/src/tsdb/home" root))
</code></pre></div></div>

<p>3. Modify the load file in the same directory. The line</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  echo "(lkb:read-script-file-aux \"${REDWOODS}/erg/lkb/script\")";
</code></pre></div></div>

<p>should be</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  echo "(lkb:read-script-file-aux \"${LOGONROOT}/lingo/erg/lkb/script\")";
</code></pre></div></div>

<p>4. Do feature caching:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd $LOGONROOT/lingo/redwoods
./load --binary fc.g.lisp
</code></pre></div></div>

<p>5. Modify the train.g.lisp script in the redwoods directory so that it
uses your generation profile for the training:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(train "erg/1004/rtc006/10-10-10/lkb" "erg/1004/mrs/10-10-10/lkb/rtc006.g.mem" :fcp nil)
</code></pre></div></div>

<p>6. Train the model:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./load --binary train.g.lisp
</code></pre></div></div>

<p>Last update: 2011-10-09 by anonymous [<a href="https://github.com/delph-in/docs/wiki/LogonModeling/_edit">edit</a>]</p>

        
      </section>

      <footer class="page__meta">
        
        


        


      </footer>

      

      
    </div>

    
  </article>

  
  
</div>
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form onsubmit="return googleCustomSearchExecute();" id="cse-search-box-form-id">
    <label class="sr-only" for="cse-search-input-box-id">
      Enter your search term...
    </label>
    <input type="search" id="cse-search-input-box-id" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results">
    <gcse:searchresults-only></gcse:searchresults-only>
  </div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    
      <li><a href="/docsproto/tools/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 Your Name. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/docsproto/tools/assets/js/main.min.js"></script>


<script>
  (function () {
    var cx = '7761c0bff1e224240';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();

  function googleCustomSearchExecute() {
    var input = document.getElementById('cse-search-input-box-id');
    var element = google.search.cse.element.getElement('searchresults-only0');
    if (input.value == '') {
      element.clearAllResults();
    } else {
      element.execute(input.value);
    }
    return false;
  }

  
</script>







  </body>
</html>
