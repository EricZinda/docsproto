<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>DELPH-IN Concepts</title>
<meta name="description" content="An amazing website.">


  <meta name="author" content="Your Name">
  


<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="DELPH-IN Concepts">
<meta property="og:title" content="DELPH-IN Concepts">
<meta property="og:url" content="http://blog.inductorsoftware.com/docsproto/concept/ItsdbTreebanking_ItsdbAnnotation/">


  <meta property="og:description" content="An amazing website.">











  

  


<link rel="canonical" href="http://blog.inductorsoftware.com/docsproto/concept/ItsdbTreebanking_ItsdbAnnotation/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Your Name",
      "url": "http://blog.inductorsoftware.com/docsproto/concept/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/docsproto/concept/feed.xml" type="application/atom+xml" rel="alternate" title="DELPH-IN Concepts Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/docsproto/concept/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--delphin_page wide">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/docsproto/concept/"><img src="/docsproto/concept/assets/images/Delph-In.png" alt="DELPH-IN Concepts"></a>
        
        <a class="site-title" href="/docsproto/concept/">
          DELPH-IN Concepts
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="https://blog.inductorsoftware.com/docsproto/home/Home">Home</a>
            </li><li class="masthead__menu-item">
              <a href="https://blog.inductorsoftware.com/docsproto/concept/ErgSemantics">Concepts</a>
            </li><li class="masthead__menu-item">
              <a href="https://blog.inductorsoftware.com/docsproto/tools/ToolsTop">Tools</a>
            </li><li class="masthead__menu-item">
              <a href="https://blog.inductorsoftware.com/docsproto/erg/ErgTop">ERG</a>
            </li><li class="masthead__menu-item">
              <a href="https://blog.inductorsoftware.com/docsproto/grammars/GrammarCatalogue">Grammars</a>
            </li><li class="masthead__menu-item">
              <a href="https://blog.inductorsoftware.com/docsproto/matrix/MatrixTop">Matrix</a>
            </li><li class="masthead__menu-item">
              <a href="https://blog.inductorsoftware.com/docsproto/summits/SummitTop">Summits</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      <li>
        
          <span class="nav__sub-title">Treebanking</span>
        

        
        <ul>
          
            <li><a href="/docsproto/concept/TreebankingTop">Overview</a></li>
          
            <li><a href="/docsproto/concept/FftbTop">Full Forest Treebanker (FFTB)</a></li>
          
            <li><a href="/docsproto/concept/FftbWishlist">Full Forest Treebanker Wishlist</a></li>
          
            <li><a href="/docsproto/concept/ItsdbTreebanking">[incr tsdb()] Treebanking</a></li>
          
            <li><a href="/docsproto/concept/ItsdbTreebanking_ItsdbAnnotation">[incr tsdb()] Treebanking Annotation</a></li>
          
            <li><a href="/docsproto/concept/ItsdbTreebanking_ItsdbUpdating">[incr tsdb()] Treebanking Updating</a></li>
          
            <li><a href="/docsproto/concept/ItsdbTreebanking_ItsdbExporting">[incr tsdb()] Treebanking Exporting</a></li>
          
            <li><a href="/docsproto/concept/ItsdbTreebanking_ItsdbModeling">[incr tsdb()] Treebanking Modeling</a></li>
          
            <li><a href="/docsproto/concept/ItsdbTreebanking_ItsdbUpdating">[incr tsdb()] Treebanking Updating</a></li>
          
            <li><a href="/docsproto/concept/ItsdbCustomization">[incr tsdb()] Treebanking Customization</a></li>
          
            <li><a href="/docsproto/concept/ItsdbTreebanking_ItsdbModeling">[incr tsdb()] Treebanking Modeling</a></li>
          
            <li><a href="/docsproto/concept/IndraTreebanking">Indra</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Formats</span>
        

        
        <ul>
          
            <li><a href="/docsproto/concept/DelphinRFCs">Delphin RFCs</a></li>
          
            <li><a href="/docsproto/concept/PredicateRfc">Predicate RFC</a></li>
          
            <li><a href="/docsproto/concept/MrsRFC">MRS Format RFC</a></li>
          
            <li><a href="/docsproto/concept/MrsIsomorphism">MRS Isomorphism</a></li>
          
            <li><a href="/docsproto/concept/EdsTop">EDS Format</a></li>
          
            <li><a href="/docsproto/concept/EdsConversion">EDS Conversion</a></li>
          
            <li><a href="/docsproto/concept/EdsGeneration">EDS Generation</a></li>
          
            <li><a href="/docsproto/concept/SemiRfc">SEM-I RFC</a></li>
          
            <li><a href="/docsproto/concept/TdlRFC">TDL RFC</a></li>
          
            <li><a href="/docsproto/concept/TsqlRfc">TSQL RFC</a></li>
          
            <li><a href="/docsproto/concept/GrammarVersionRfc">Grammar Version RFC</a></li>
          
            <li><a href="/docsproto/concept/GrammarConfigurationRfc">Grammar Configuration RFC</a></li>
          
            <li><a href="/docsproto/concept/TsdbSchemaRfc">TSDB Schema RFC</a></li>
          
            <li><a href="/docsproto/concept/MatrixChoicesRfc">Matrix Choices RFC</a></li>
          
            <li><a href="/docsproto/concept/RmrsTop">(R)MRS Overview</a></li>
          
            <li><a href="/docsproto/concept/RmrsWellformedness">(R)MRS Wellformedness</a></li>
          
            <li><a href="/docsproto/concept/RmrsPos">(R)MRS Predicate Naming</a></li>
          
            <li><a href="/docsproto/concept/RmrsSpan">(R)MRS Span</a></li>
          
            <li><a href="/docsproto/concept/RmrsDesign">(R)MRS Design</a></li>
          
            <li><a href="/docsproto/concept/RmrsParaphrasing">(R)MRS Paraphrasing</a></li>
          
            <li><a href="/docsproto/concept/RmrsModel">(R)MRS Model</a></li>
          
            <li><a href="/docsproto/concept/RmrsDistributional">(R)MRS Distributional</a></li>
          
            <li><a href="/docsproto/concept/RmrsSemi">(R)MRS Semi</a></li>
          
            <li><a href="/docsproto/concept/RmrsDmrs">(R)MRS Dmrs</a></li>
          
            <li><a href="/docsproto/concept/RmrsFaq">(R)MRS Faq</a></li>
          
            <li><a href="/docsproto/concept/RmrsDiscussions">(R)MRS Discussions</a></li>
          
            <li><a href="/docsproto/concept/TransferRules">Transfer Rules</a></li>
          
            <li><a href="/docsproto/concept/FormatSpecifications">Format Specifications</a></li>
          
            <li><a href="/docsproto/concept/ErgGml">Grammar Markup Language</a></li>
          
            <li><a href="/docsproto/concept/SmafTop">SMAF</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Projects</span>
        

        
        <ul>
          
            <li><a href="/docsproto/concept/RedwoodsTop">Redwoods</a></li>
          
            <li><a href="/docsproto/concept/DeepBank">DeepBank</a></li>
          
            <li><a href="/docsproto/concept/DeepBank_OneZero">DeepBank 1.0</a></li>
          
            <li><a href="/docsproto/concept/ErgSemantics_Discovery">Semantics Discovery</a></li>
          
            <li><a href="/docsproto/concept/WikiWoods">WikiWoods</a></li>
          
            <li><a href="/docsproto/concept/SemCor">SC corpus</a></li>
          
            <li><a href="/docsproto/concept/WeScience">We Science</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Discussions</span>
        

        
        <ul>
          
            <li><a href="/docsproto/concept/SaarlandSententialArgument">Saarland Sentential Argument</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Housekeeping</span>
        

        
        <ul>
          
            <li><a href="/docsproto/concept/ErgSemantics_Raw_Materials">Raw Materials</a></li>
          
            <li><a href="/docsproto/concept/ErgSemantics_Conventions">ERG Semantics Conventions</a></li>
          
            <li><a href="/docsproto/concept/IconsSpecs">Icons Specs</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>

    
  
  </div>



  <article class="page h-entry" itemscope itemtype="https://schema.org/CreativeWork">
    
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          


        </header>
      

      <section class="page__content e-content" itemprop="text">
        
        <h1 id="page-status">Page Status</h1>

<p>This page presents user-supplied information, hence may be inaccurate in
some details, or not necessarily reflect use patterns anticipated by the
<a href="http://www.delph-in.net/itsdb">[incr tsdb()]</a> developers. This page
was initiated by <a href="https://blog.inductorsoftware.com/docsproto/tools/FrancisBond">FrancisBond</a>; please feel free to make
additions or corrections as you see fit. However, before revising this
page, one should be reasonably confident of the information given being
correct.</p>

<h1 id="annotation">Annotation</h1>

<p>This page describes how to treebank with <a href="http://www.delph-in.net/itsdb">[incr
tsdb()]</a> (<a href="https://blog.inductorsoftware.com/docsproto/tools/ItsdbTop">ItsdbTop</a>), as well
as how to normalize the annotated profile.</p>

<p><a href="http://www.delph-in.net/itsdb">[incr tsdb()]</a> supports Redwoods-style
treebanking, from the <em>Trees</em> menu. It has been used to produce the
Redwoods (<a href="../RedwoodsTop">RedwoodsTop</a>) and Hinoki treebanks. You can
annotate a corpus; update an annotated corpus to a new grammar; and
train statistical models on the treebanked corpora.</p>

<p>Normally only active and deduced discriminants are written out. You can
write out all discriminants by setting
*redwoods-record-void-discriminants-p* to t when you are in the tsdb
package.</p>

<p>After selecting a profile, <em>Trees | Annotate</em>, will bring you into the
interface for compiling a treebank. You must have have the same grammar
loaded in the LKB (<a href="https://blog.inductorsoftware.com/docsproto/tools/LkbTop">LkbTop</a>) that was used to parse the profile
because the system uses the grammar to do the reconstruction of the
parse trees.</p>

<p>The annotator selects the correct analysis (or, occasionally, rejects
all analyses). Selection is done through a choice of discriminants. The
system selects features that distinguish between different parses, and
the annotator selects or rejects the features until only one parse
remains. The number of decisions for each sentence is normally around
log_2 of the number of parses, although sometimes a single decision can
reduce the number of remaining parses by more or less than half. In
general, even a sentence with 5,000 parses only requires around 12
decisions.</p>

<p>After you completely disambiguate, in the left-hand-side window you will
see the elementary dependency structures displayed underneath the tree.
Quantifiers and messages are suppressed (by default: see
/src/mrs/dependencies.lisp for the configuration options).</p>

<p>The dependencies are color coded:</p>

<ul>
  <li>Blue: Good dependency constructed.</li>
  <li>Orange: Fragmented dependency constructed.</li>
  <li>Red: Cyclic.</li>
</ul>

<h3 id="recommended-settings">Recommended Settings</h3>

<ul>
  <li>
    <p>Number of results stored: 500 —
(setf tsdb::*tsdb-maximal-number-of-results* 500)</p>

    <ul>
      <li>when you have a model, the good parse is almost always in the
top 500, and annotation is much quicker.</li>
    </ul>
  </li>
</ul>

<h3 id="updating-from-an-old-grammar">Updating from an old grammar</h3>

<p>When updating from gold to new, the first step is to identify the gold
profile as gold by middle-clicking on it in the <a href="http://www.delph-in.net/itsdb">[incr
tsdb()]</a> window (turning that line to
gold color; if you don’t have a middle button, click on Compare–Source
Database to choose the gold profile), and to identify the new profile as
the one to be updated, by left-clicking on it (turning that line’s color
to blue). Then in that window, click on Trees–Update, which will launch
the automatic updating stage, which should take a while, but probably
less than an hour for this profile. Alternatively you can use the
‘redwoods’ export script to achieve this.</p>

<p>Once this is done, you can click on Trees–Summarize–Annotations to get
a table which will show how many of your items were fully disambiguated
based on the gold discriminants (t-active=1), and how many need manual
disambiguation (unannotated), along with other information. Now you need
to deal with the remaining unannotated items manually. To do this, click
on Trees–Switches–Automatic Update to turn this switch off. Then to
restrict yourself to only the unannotated items, click on Options–TSQL
Condition–Unannotated. Now click on Update, and after a short pause,
the treebanking window will appear, presenting you with the first of the
items that need manual attention. In many cases, the previous
discriminants will have served to partially disambiguate, leaving you
with a few remaining new choices to make, but in some cases it will look
like you have to start over (either because this item wasn’t even parsed
previously, or because the discriminants are no longer useful). Before
you groan in these cases, try hitting the magic Reset button (next to
the Clear button), which will often get you a partially or fully
disambiguated result after all. This resolves the tree on the basis of
only manually selected discriminants from the gold profile, rather than
deduced discriminants as well (which is the norm), meaning that it is
less likely to fail (with fewer discriminants) but also results in less
disambiguation.</p>

<p>Once you’ve found your way to the right tree by selecting appropriate
discriminants, hit Save as usual, which stores your decisions, and moves
you to the next unannotated item.</p>

<p>It is easy to confuse oneself with that Options–TSQL Condition setting,
so once you’re done with a stage of updating, it’s good to remember to
reset that constraint to No Condition before (say) asking for the
Trees–Summarize–Annotations chart again, or you won’t get information
on all of the items in the profile.</p>

<h3 id="normalizing">Normalizing</h3>

<p>When you annotate an item, the old unannotated entry for that item in
the database is not deleted, but rather the database is augmented with
another entry recording the updated information about that item, along
with a version indicator showing that the annotated entry is more recent
than the original one. But this version annotation is not dynamically
queried when you impose conditions, so to make the version information
usable (e.g. to be able to run queries to see unannotated items by
selecting Options | TSQL condition | Unannotated) you have to
periodically “normalize” the database.</p>

<p>You normalize by selecting <em>Trees | Normalize</em> and give a name for the
new normalized database (since the old one will not be overwritten).
This step should not be too time-consuming as long as your databases has
fewer than 3000 items in them (recommended). In Hinoki, we find a
database with 2000 items and a maximum of 5,000 results is quite slow,
taking several hours (2005-03-25).</p>

<p><strong>NOTE:</strong> Remember to set the <em>Options | TSQL Condition</em> to no
condition, otherwise only some trees will be normalized.</p>

<p><strong>NOTE:</strong> Normalizing gets slightly quicker if you iconicize emacs, and
is much quicker if you run it as a batch.</p>

<h3 id="thinning-normalizing">Thinning Normalizing</h3>

<p>This saves only the results for good trees, making a much smaller
profile.</p>

<p>When you thinning normalize it is possible to save MRSs and phrase
structure trees for the treebanked sentences by setting the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(setf tsdb::*redwoods-semantix-hook* "mrs::mrs-get-string")
(setf tsdb::*redwoods-trees-hook* "lkb::parse-tree-structure")
</code></pre></div></div>

<h2 id="clear-cutting">Clear Cutting</h2>

<p>If you for some reason you wish to delete all the trees (e.g., you made
a false start with the update process for Run 2) you can (verrrrryyyy
carefully) discard the new annotations by selecting <em>Trees | Clear
Cut</em>. Be certain (as in positive) that you are removing these
annotations for Run 2, not the hand-coded real annotations you
constructed painstakingly for Run 1, as clear cutting fells all the
trees.</p>

        
      </section>

      <footer class="page__meta">
        
        


        


      </footer>

      

      
    </div>

    
  </article>

  
  
</div>
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form onsubmit="return googleCustomSearchExecute();" id="cse-search-box-form-id">
    <label class="sr-only" for="cse-search-input-box-id">
      Enter your search term...
    </label>
    <input type="search" id="cse-search-input-box-id" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results">
    <gcse:searchresults-only></gcse:searchresults-only>
  </div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    
      <li><a href="/docsproto/concept/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 Your Name. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/docsproto/concept/assets/js/main.min.js"></script>


<script>
  (function () {
    var cx = '7761c0bff1e224240';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();

  function googleCustomSearchExecute() {
    var input = document.getElementById('cse-search-input-box-id');
    var element = google.search.cse.element.getElement('searchresults-only0');
    if (input.value == '') {
      element.clearAllResults();
    } else {
      element.execute(input.value);
    }
    return false;
  }

  
</script>







  </body>
</html>
